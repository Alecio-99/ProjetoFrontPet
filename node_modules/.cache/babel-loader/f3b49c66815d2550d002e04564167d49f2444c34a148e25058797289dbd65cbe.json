{"ast":null,"code":"export const TOKEN_KEY = \"@petshop-token\";\nexport const isAuthenticated = () => localStorage.getItem(TOKEN_KEY) !== null;\nexport const getToken = () => localStorage.getItem(TOKEN_KEY);\nexport const login = token => {\n  localStorage.setItem(TOKEN_KEY, token);\n};\nexport const logout = () => {\n  localStorage.removeItem(TOKEN_KEY);\n};\nexport const api = {\n  baseURL: \"http://localhost:8080/cadastroPet/\",\n  login: async (email, password) => {\n    try {\n      //Aqui ésta sendo passodo o login\n      const response = await fetch(`${api.baseURL}`, {\n        method: \"GET\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      if (!response.ok) {\n        throw new Error(\"Falha na autenticação\");\n      }\n      const data = await response.json();\n      login(data.token);\n      return data;\n    } catch (error) {\n      throw error;\n    }\n  },\n  register: async userData => {\n    try {\n      //  aqui está sendo passado o cadastro\n      const response = await fetch(`${api.baseURL}`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(userData)\n      });\n      if (!response.ok) {\n        throw new Error(\"Falha no cadastro\");\n      }\n      return await response.json();\n    } catch (error) {\n      throw error;\n    }\n  }\n};","map":{"version":3,"names":["TOKEN_KEY","isAuthenticated","localStorage","getItem","getToken","login","token","setItem","logout","removeItem","api","baseURL","email","password","response","fetch","method","headers","body","JSON","stringify","ok","Error","data","json","error","register","userData"],"sources":["C:/Repositorios/FrontEnd/JavaScript/FrontEndPet/src/services/auth.js"],"sourcesContent":["export const TOKEN_KEY = \"@petshop-token\";\r\n\r\nexport const isAuthenticated = () => localStorage.getItem(TOKEN_KEY) !== null;\r\n\r\nexport const getToken = () => localStorage.getItem(TOKEN_KEY);\r\n\r\nexport const login = (token) => {\r\n  localStorage.setItem(TOKEN_KEY, token);\r\n};\r\n\r\nexport const logout = () => {\r\n  localStorage.removeItem(TOKEN_KEY);\r\n};\r\n\r\nexport const api = {\r\n  baseURL: \"http://localhost:8080/cadastroPet/\",\r\n  \r\n  login: async (email, password) => {\r\n    try {\r\n      //Aqui ésta sendo passodo o login\r\n      const response = await fetch(`${api.baseURL}`, {\r\n        method: \"GET\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(\"Falha na autenticação\");\r\n      }\r\n      \r\n      const data = await response.json();\r\n      login(data.token);\r\n      return data;\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  },\r\n  \r\n  register: async (userData) => {\r\n    try {\r\n    //  aqui está sendo passado o cadastro\r\n      const response = await fetch(`${api.baseURL}`, {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify(userData),\r\n      });\r\n      \r\n      if (!response.ok) {\r\n        throw new Error(\"Falha no cadastro\");\r\n      }\r\n      \r\n      return await response.json();\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  },\r\n}; "],"mappings":"AAAA,OAAO,MAAMA,SAAS,GAAG,gBAAgB;AAEzC,OAAO,MAAMC,eAAe,GAAGA,CAAA,KAAMC,YAAY,CAACC,OAAO,CAACH,SAAS,CAAC,KAAK,IAAI;AAE7E,OAAO,MAAMI,QAAQ,GAAGA,CAAA,KAAMF,YAAY,CAACC,OAAO,CAACH,SAAS,CAAC;AAE7D,OAAO,MAAMK,KAAK,GAAIC,KAAK,IAAK;EAC9BJ,YAAY,CAACK,OAAO,CAACP,SAAS,EAAEM,KAAK,CAAC;AACxC,CAAC;AAED,OAAO,MAAME,MAAM,GAAGA,CAAA,KAAM;EAC1BN,YAAY,CAACO,UAAU,CAACT,SAAS,CAAC;AACpC,CAAC;AAED,OAAO,MAAMU,GAAG,GAAG;EACjBC,OAAO,EAAE,oCAAoC;EAE7CN,KAAK,EAAE,MAAAA,CAAOO,KAAK,EAAEC,QAAQ,KAAK;IAChC,IAAI;MACF;MACA,MAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGL,GAAG,CAACC,OAAO,EAAE,EAAE;QAC7CK,MAAM,EAAE,KAAK;QACbC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAER,KAAK;UAAEC;QAAS,CAAC;MAC1C,CAAC,CAAC;MAEF,IAAI,CAACC,QAAQ,CAACO,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,uBAAuB,CAAC;MAC1C;MAEA,MAAMC,IAAI,GAAG,MAAMT,QAAQ,CAACU,IAAI,CAAC,CAAC;MAClCnB,KAAK,CAACkB,IAAI,CAACjB,KAAK,CAAC;MACjB,OAAOiB,IAAI;IACb,CAAC,CAAC,OAAOE,KAAK,EAAE;MACd,MAAMA,KAAK;IACb;EACF,CAAC;EAEDC,QAAQ,EAAE,MAAOC,QAAQ,IAAK;IAC5B,IAAI;MACJ;MACE,MAAMb,QAAQ,GAAG,MAAMC,KAAK,CAAC,GAAGL,GAAG,CAACC,OAAO,EAAE,EAAE;QAC7CK,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UACP,cAAc,EAAE;QAClB,CAAC;QACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACO,QAAQ;MAC/B,CAAC,CAAC;MAEF,IAAI,CAACb,QAAQ,CAACO,EAAE,EAAE;QAChB,MAAM,IAAIC,KAAK,CAAC,mBAAmB,CAAC;MACtC;MAEA,OAAO,MAAMR,QAAQ,CAACU,IAAI,CAAC,CAAC;IAC9B,CAAC,CAAC,OAAOC,KAAK,EAAE;MACd,MAAMA,KAAK;IACb;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}